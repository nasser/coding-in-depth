
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Collision Detection Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="tags.html" />
    
    
    <link rel="prev" href="destroy-setup.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="lesson-plan.html">
            
                <a href="lesson-plan.html">
            
                    
                    Lesson Plan
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="setup.html">
            
                <a href="setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="session-1.html">
            
                <a href="session-1.html">
            
                    
                    Session 1
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="semantics.html">
            
                <a href="semantics.html">
            
                    
                    How Unity Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="ui.html">
            
                <a href="ui.html">
            
                    
                    Unity's UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="play-and-hack.html">
            
                <a href="play-and-hack.html">
            
                    
                    Play and Hack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="session-2.html">
            
                <a href="session-2.html">
            
                    
                    Session 2
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="enemy-setup.html">
            
                <a href="enemy-setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="csharp-vs-unity.html">
            
                <a href="csharp-vs-unity.html">
            
                    
                    C# vs Unity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="boilerplate.html">
            
                <a href="boilerplate.html">
            
                    
                    Boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="fields.html">
            
                <a href="fields.html">
            
                    
                    Fields
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="turning-logic.html">
            
                <a href="turning-logic.html">
            
                    
                    Turning Logic
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="session-3.html">
            
                <a href="session-3.html">
            
                    
                    Session 3
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="destroy-setup.html">
            
                <a href="destroy-setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.4.2" data-path="collision.html">
            
                <a href="collision.html">
            
                    
                    Collision Detection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="tags.html">
            
                <a href="tags.html">
            
                    
                    Tags
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="session-4.html">
            
                <a href="session-4.html">
            
                    
                    Session 4
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" >
            
                <span>
            
                    
                    Setup
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" >
            
                <span>
            
                    
                    Prefabs
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" >
            
                <span>
            
                    
                    Instantiating
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" >
            
                <span>
            
                    
                    Offsets
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.5" >
            
                <span>
            
                    
                    Timers
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Context</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="history.html">
            
                <a href="history.html">
            
                    
                    History
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Instruction Notes</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="type-along.html">
            
                <a href="type-along.html">
            
                    
                    Type-along Coding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="errors.html">
            
                <a href="errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Collision Detection</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="session-3">Session 3</h1>
<h2 id="collision-detection">Collision Detection</h2>
<p>When things touch, they are said to have <em>collided</em>. Detecting when this happens is called <em>collision detection</em>. Unity provides collision detection through its physics engine, which might seem odd, but the part of Unity that is concerned with making things move realistically needs to know how and when things collide so that it can animate them. The point to stress here is that even if you aren&apos;t doing physics as we normally understand it, you still need Unity&apos;s physics components to detect if things are touching or not.</p>
<h3 id="2d-vs-3d">2D vs 3D</h3>
<p>This is further complicated by the fact that Unity actually has <em>two</em> physics engines built in, one for <a href="https://en.wikipedia.org/wiki/PhysX" target="_blank">3D physics</a> and one for <a href="https://en.wikipedia.org/wiki/Box2D" target="_blank">2D physics</a>. <em>They are distinct engines that do not interact</em>, so you normally have to pick one for your game and use it. Furthermore, the 2D engine was added later, so Components that use it have <code>2D</code> added to their name (e.g. <code>Rigidbody2D</code>, <code>BoxCollider2D</code>). Physics Components <em>without</em> 2D are 3D. This lesson only uses the 2D engine.</p>
<h3 id="rigidbodies-and-colliders">Rigidbodies and Colliders</h3>
<p>Attaching the built in <code>Rigidbody2D</code> component to a GameObject causes it to participate in the physics simulation. By default, it will apply gravity, and setting Gravity Scale to 0 disables that. A GameObject without a <code>Rigidbody2D</code> is effectively ignored by the physics engine.</p>
<p>The <code>Rigidbody2D</code> component does not specify the <em>shape</em> of an object, though. That is left up to the <code>Collider2D</code> components. There are a bunch of them in different shapes, and you can add as many as you want to a GameObject. We use <code>PolygonCollider2D</code> in this lesson as it gives the tightest collision detection. Colliders can be <a href="https://unity3d.com/learn/tutorials/topics/physics/colliders-triggers" target="_blank">triggers</a>, which means they do not react physically, and generate different messages. We are not using trigegrs in this lesson.</p>
<p>Strictly speaking, for the collision of two objects to be detected, <em>both</em> need colliders and <em>at least one</em> needs a rigidbody. To keep things simple and consistent, we just insist that every object be given a rigidbody and a collider if we want collision detection.</p>
<h3 id="detecting-collision">Detecting Collision</h3>
<p>Since we set up the enemy in the last session to have a <code>Rigidbody2D</code> and a <code>PolygonCollider2D</code>, and the Player&apos;s bullets already have a <code>Rigidbody2D</code> and <code>BoxCollider2D</code> attached, we&apos;re ready to start writing code! Create a new component on the Enemy named <code>DestroySelfOnCollision</code> that will remove the attached gameObject whenever collision is detected. Guide your class through writing the following code (not the final code yet, but close):</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DestroySelfOnCollision</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionEnter2D</span>(<span class="hljs-params">Collision2D collision</span>)
    </span>{
      Destroy(gameObject);
    }
}
</code></pre>
<h4 id="explanation">Explanation</h4>
<p>Most of this code is like the <code>AlwaysLookAt</code> component from the previous session, except with <code>OnCollisionEnter2D</code> in place of <code>Update</code>. Stress the similarities with your class.</p>
<h5 id="oncollisionenter2d"><code>OnCollisionEnter2D</code></h5>
<p>Recall that Unity uses specially named C# methods to send &quot;messages&quot; to your components. <code>Start</code> gets called once at the start of a game, <code>Update</code> gets called once every frame, and here <code>OnCollisionEnter2D</code> gets called the first frame of a collision detected. This answers our first question: How do we know when two GameObjects touch? The <code>OnCollisionEnter2D</code> method is called on <em>every component</em> attached to <em>every GameObject</em> involved in the collision. The order they they get called in is generally random, but you can <a href="https://docs.unity3d.com/Manual/class-ScriptExecution.html" target="_blank">control it</a> to some extent.</p>
<p>Unlike <code>Start</code> and <code>Update</code>, <code>OnCollisionEnter2D</code> passes additional information to you when it is triggered in the form of the <a href="https://docs.unity3d.com/ScriptReference/Collision2D.html" target="_blank">parameter <code>collision</code></a>. This <em>describes</em> the collision, and has properties like <a href="https://docs.unity3d.com/ScriptReference/Collision2D-contacts.html" target="_blank"><code>contacts</code></a> (the specific points where the collision occurred) and <a href="https://docs.unity3d.com/ScriptReference/Collision2D-relativeVelocity.html" target="_blank"><code>relativeVelocity</code></a>, the relative velocity of the colliding objects.</p>
<h5 id="destroy"><code>Destroy</code></h5>
<p><a href="https://docs.unity3d.com/ScriptReference/Object.Destroy.html" target="_blank"><code>Destroy</code></a> removes the specified GameObject, in this case <a href="https://docs.unity3d.com/ScriptReference/Component-gameObject.html" target="_blank"><code>gameObject</code></a> is the GameObject attached to the component in question.</p>
<h3 id="play-the-game">Play the Game</h3>
<p>Play the game and demonstrate that this does cause the enemy to disappear when it touches bullets! However:</p>
<p><img src="oops-1.gif" alt=""></p>
<p><img src="oops-2.gif" alt=""></p>
<p>The code we wrote will cause the enemy to disappear when it touched <em>anything</em>, which is not what we want. We need to update our code to only react to <em>certain</em> objects, in this case, the player&apos;s bullets.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="destroy-setup.html" class="navigation navigation-prev " aria-label="Previous page: Setup">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="tags.html" class="navigation navigation-next " aria-label="Next page: Tags">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Collision Detection","level":"1.2.4.2","depth":3,"next":{"title":"Tags","level":"1.2.4.3","depth":3,"path":"tags.md","ref":"tags.md","articles":[]},"previous":{"title":"Setup","level":"1.2.4.1","depth":3,"path":"destroy-setup.md","ref":"destroy-setup.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"collision.md","mtime":"2017-03-07T20:58:43.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-06T22:49:31.373Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

